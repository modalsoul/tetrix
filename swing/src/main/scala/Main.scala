package jp.modal.soul.tetrix.swing

import swing._
import event._
import jp.modal.soul.tetrix._ 

object Main extends SimpleSwingApplication {
	import event.Key._
	import java.awt.{Dimension, Graphics2D, Graphics, Image, Rectangle}
	import java.awt.{Color => AWTColor}

	val bluishGray = new AWTColor(48, 99, 99)
	val bluishSilver = new AWTColor(210, 255, 255)

	val ui = new AbstractUI

	def onKeyPress(keyCode: Value) = keyCode match {
		case Left => ui.left()
		case Right => ui.right()
		case Up => ui.up()
		case Down => ui.down()
		case Space => ui.space()
		case _ => 
	}

	def onPaint(g:Graphics2D) {
		g setColor bluishSilver
		g drawString (ui.last, 20, 20)
	}

	def top = new MainFrame {
		title = "tetrix"
		contents = mainPanel
	}
	
	def mainPanel = new Panel {
		preferredSize = new Dimension(700, 400)
		focusable = true
		listenTo(keys)
		reactions += {
			case KeyPressed(_, key, _, _) =>
				onKeyPress(key)
				repaint 
		}
		override def paint(g:Graphics2D) {
			g setColor bluishGray
			g fillRect (0, 0, size.width, size.height)
			onPaint(g)
		}
	}


}